<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Finder - For Alex</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5',
                        secondary: '#8b5cf6',
                        accent: '#ec4899',
                        dark: '#1f2937',
                        light: '#f8fafc',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        .book-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 4px solid #4f46e5;
        }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.3);
        }
        .search-box {
            box-shadow: 0 4px 14px 0 rgba(79, 70, 229, 0.15);
        }
        .header-gradient {
            background: linear-gradient(135deg, #4f46e5 0%, #8b5cf6 100%);
        }
        .loader {
            border-top-color: #4f46e5;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="header-gradient text-white py-12 px-4">
        <div class="container mx-auto max-w-6xl">
            <div class="flex items-center justify-center mb-6">
                <i class="fas fa-book-reader text-4xl mr-4"></i>
                <h1 class="text-4xl font-bold">Book Finder</h1>
            </div>
            <p class="text-center text-xl opacity-90">For Alex the College Student</p>
            <p class="text-center mt-2 opacity-80">Find your next favorite book with ease</p>
        </div>
    </div>

    <main class="container mx-auto max-w-6xl px-4 py-8 -mt-10">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 search-box">
            <div class="flex flex-col md:flex-row gap-4">
                <input 
                    type="text" 
                    id="searchInput"
                    placeholder="Search by title, author, or subject..." 
                    class="flex-grow px-6 py-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-colors"
                >
                <button 
                    id="searchButton"
                    class="px-8 py-4 bg-primary text-white font-semibold rounded-lg hover:bg-secondary transition-colors flex items-center justify-center"
                >
                    <i class="fas fa-search mr-2"></i> Search Books
                </button>
            </div>
            
            <div class="mt-6 flex flex-wrap gap-2 justify-center">
                <span class="text-gray-600">Try:</span>
                <button class="quick-search px-3 py-1 bg-gray-100 text-gray-800 rounded-full hover:bg-primary hover:text-white transition-colors">
                    Harry Potter
                </button>
                <button class="quick-search px-3 py-1 bg-gray-100 text-gray-800 rounded-full hover:bg-primary hover:text-white transition-colors">
                    Stephen King
                </button>
                <button class="quick-search px-3 py-1 bg-gray-100 text-gray-800 rounded-full hover:bg-primary hover:text-white transition-colors">
                    Science Fiction
                </button>
                <button class="quick-search px-3 py-1 bg-gray-100 text-gray-800 rounded-full hover:bg-primary hover:text-white transition-colors">
                    Computer Science
                </button>
            </div>
        </div>

        <div id="resultsContainer" class="mb-8">
            <div id="resultsInfo" class="bg-blue-50 p-4 rounded-lg mb-6 hidden">
                <p class="text-blue-800 font-medium">Found <span id="resultsCount">0</span> books</p>
            </div>

            <div id="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6 hidden">
                Error message will appear here
            </div>

            <div id="loading" class="flex justify-center py-12 hidden">
                <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div>
            </div>

            <div id="emptyState" class="text-center py-12 hidden">
                <i class="fas fa-book-open text-4xl text-gray-400 mb-4"></i>
                <p class="text-gray-500 text-lg">No books found. Try a different search term.</p>
            </div>

            <div id="booksGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Books will be inserted here by JavaScript -->
            </div>
        </div>

        <div id="initialState" class="text-center py-12">
            <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
            <p class="text-gray-500 text-lg">Search for books by title, author, or subject</p>
            <p class="text-gray-400 mt-2">Try the suggestions above or enter your own search term</p>
            
            <div class="mt-8 bg-blue-50 p-6 rounded-lg max-w-2xl mx-auto">
                <h3 class="font-semibold text-blue-800 mb-2">About This Application</h3>
                <p class="text-blue-700 text-sm">
                    This Book Finder application uses the Open Library API to search for books. 
                    It displays book covers, titles, authors, publication years, and ISBN numbers.
                </p>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white py-8 mt-12">
        <div class="container mx-auto max-w-6xl px-4 text-center">
            <p>Book Finder - Using Open Library Search API</p>
            <p class="text-gray-400 text-sm mt-2">https://openlibrary.org/search.json?title=&#123;bookTitle&#125;</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const quickSearchButtons = document.querySelectorAll('.quick-search');
            const booksGrid = document.getElementById('booksGrid');
            const resultsInfo = document.getElementById('resultsInfo');
            const resultsCount = document.getElementById('resultsCount');
            const errorMessage = document.getElementById('errorMessage');
            const loadingElement = document.getElementById('loading');
            const emptyState = document.getElementById('emptyState');
            const initialState = document.getElementById('initialState');
            
            // Quick search buttons
            quickSearchButtons.forEach(button => {
                button.addEventListener('click', function() {
                    searchInput.value = this.textContent;
                    searchBooks();
                });
            });
            
            // Search button click
            searchButton.addEventListener('click', searchBooks);
            
            // Enter key in search input
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchBooks();
                }
            });
            
            // Search books function
            function searchBooks() {
                const query = searchInput.value.trim();
                
                if (!query) return;
                
                // Show loading state
                setLoadingState(true);
                
                // Hide error and empty state
                errorMessage.classList.add('hidden');
                emptyState.classList.add('hidden');
                initialState.classList.add('hidden');
                
                // Clear previous results
                booksGrid.innerHTML = '';
                resultsInfo.classList.add('hidden');
                
                // Make API request
                fetch(`https://openlibrary.org/search.json?title=${encodeURIComponent(query)}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Failed to fetch books. Please check your internet connection and try again.');
                        }
                        return response.json();
                    })
                    .then(data => {
                        setLoadingState(false);
                        
                        if (data.docs && data.docs.length > 0) {
                            displayBooks(data.docs);
                            resultsCount.textContent = data.docs.length;
                            resultsInfo.classList.remove('hidden');
                        } else {
                            emptyState.classList.remove('hidden');
                        }
                    })
                    .catch(error => {
                        setLoadingState(false);
                        showError('Failed to fetch books. Please check your internet connection and try again.');
                        console.error('Error:', error);
                    });
            }
            
            // Display books function
            function displayBooks(books) {
                booksGrid.innerHTML = '';
                
                books.slice(0, 40).forEach((book, index) => {
                    const bookCard = document.createElement('div');
                    bookCard.className = 'book-card bg-white rounded-lg shadow-md overflow-hidden fade-in';
                    bookCard.innerHTML = `
                        <div class="h-48 bg-gray-200 flex items-center justify-center">
                            ${book.cover_i ? 
                                `<img src="https://covers.openlibrary.org/b/id/${book.cover_i}-M.jpg" alt="${book.title}" class="h-full w-full object-cover">` : 
                                `<div class="text-gray-500">
                                    <i class="fas fa-book text-4xl"></i>
                                    <p class="mt-2">No cover available</p>
                                </div>`
                            }
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-start mb-1">
                                <span class="text-xs font-medium bg-indigo-100 text-indigo-800 px-2 py-1 rounded">
                                    #${index + 1}
                                </span>
                                ${book.first_publish_year ? 
                                    `<span class="text-xs text-gray-500">${book.first_publish_year}</span>` : ''
                                }
                            </div>
                            <h3 class="font-semibold text-lg mb-1" style="display: -webkit-box; -webkit-line-amp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                                ${book.title || 'Untitled'}
                            </h3>
                            <p class="text-gray-600 mb-2">by ${book.author_name ? book.author_name.join(', ') : 'Unknown Author'}</p>
                            
                            <div class="mt-3 pt-3 border-t border-gray-100">
                                <div class="flex flex-wrap gap-1">
                                    ${book.isbn && book.isbn.slice(0, 2).map(isbn => 
                                        `<span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">ISBN: ${isbn}</span>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    
                    booksGrid.appendChild(bookCard);
                });
            }
            
            // Set loading state
            function setLoadingState(isLoading) {
                if (isLoading) {
                    searchButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Searching...';
                    searchButton.disabled = true;
                    loadingElement.classList.remove('hidden');
                } else {
                    searchButton.innerHTML = '<i class="fas fa-search mr-2"></i> Search Books';
                    searchButton.disabled = false;
                    loadingElement.classList.add('hidden');
                }
            }
            
            // Show error message
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            }
            
            // Initial focus on search input
            searchInput.focus();
        });
    </script>
</body>
</html>